{% extends "base.html" %}
{% block content %}
{{ super() }}

<div class='affiche_div'>
<h4>{{msg}}</h4>
{% if heuresHisto %}
<table class='affiche_table'>

    <tr>
        <th> Nom </th>

        <th> Prénom </th>

        <th> Date demande </th>

        <th> Dype demande </th>
        
        <th> Date début </th>

        <th> Lieu </th>

        <th> Ecole CCI </th>

        <th> Nombre d'heures </th>

        <th> Validation </th>

    </tr>
    <form action="" method="post">
        {% for i in heuresHisto.items %}
            <tr>

                <td> {{ models.User.query.filter_by(user_id=i.user_id).first().nom }} </td>

                <td> {{ models.User.query.filter_by(user_id=i.user_id).first().prenom }} </td>
                
                <td> {{ conv_sqlstr_date(i.date_demande) }}</td>

                <td> {{ i.type_demande }} </td>

                <td> {{ conv_sqlstr_date(i.date_debut) }}</td>

                <td> {{ i.lieu }}</td>

                <td> {% if i.ecole_cci %}Oui {% else %}Non {% endif %} </td>

                <td> {{ abs_str(i.nb_heures) }} </td>

                <td>
                    <select name= {{i.heure_ext_id}} id="validate">
                        <option value=0></option>

                        <option value=2>Oui</option>

                        <option value=-1>Non</option>
                    </select>
                </td>

            </tr>
        {% endfor %}
</table>
        <br>
        <input class="btn btn-success" type="submit" value="Envoyer" />
    </form>
<br>
<div class='pagination_buttons'>
<button><a href="{{ url_for('validation_heures_ext_direction', page=1) }}">Première</a></button>

{% if heuresHisto.has_prev %}
    <button><a href="{{ url_for('validation_heures_ext_direction', page=heuresHisto.prev_num) }}">&lt;&lt; Precedent</a>
    </button>
{% else %}
    <button>&lt;&lt; Précédent</button>
{% endif %}

{% if heuresHisto.has_next %}
    <button><a href="{{ url_for('validation_heures_ext_direction', page=heuresHisto.next_num) }}">Suivant &gt;&gt;</a>
    </button>
{% else %}
    <button>Suivant &gt;&gt;</button>
{% endif %}

<button><a href="{{ url_for('validation_heures_ext_direction', page=page_max) }}">Dernière</a></button>
</div>

{% endif %}
</div>

{% endblock %}